pipeline {
    agent any
    tools { 
        maven 'Maven'
	//Docker 'docker'
    }
    stages {
    	stage ('Initialize') { // hello Jenkins
            steps {
                sh '''
                    echo "Hello from Jenkins"
		    docker --version
                ''' 
            }
        }
        stage('Build') {     // build the project ./RiskMeter without runing any test  
        	steps{
    			sh "mvn -DskipTests -f ./RiskMeter package"
    		}
        }
       stage('unit Test') {
            steps {
                sh 'mvn -f ./RiskMeter -Dtest=!App* test'
            }
	}
	stage('integration Test') {
            steps {
                sh 'mvn -f ./RiskMeter -Dtest=App* test'
            }
	}
	stage('deploy')
	{
		steps{
			sh " docker build -t myimage2:1.0 ."
			sh " docker images"
		}
	}
	
	stage(deploy)
	{
		steps{
			sh docker run -it myimage2
		}
	}
  }
} 

